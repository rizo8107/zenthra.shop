<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Order Status Update - Konipai</title>
  <style>
    /* Base Styles */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: #333;
      background-color: #f9f9f9;
      margin: 0;
      padding: 0;
    }
    
    /* Container Styles */
    .email-container {
      max-width: 600px;
      margin: 0 auto;
      background-color: #ffffff;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
    }
    
    /* Header Styles */
    .email-header {
      background-color: #5c3fa9;
      color: white;
      padding: 20px 30px;
      text-align: center;
    }
    
    .logo {
      max-width: 180px;
      height: auto;
      margin: 0 auto;
      display: block;
    }
    
    /* Content Styles */
    .email-content {
      padding: 30px;
    }
    
    .greeting {
      font-size: 22px;
      font-weight: 600;
      margin-bottom: 20px;
      color: #5c3fa9;
    }
    
    .message {
      font-size: 16px;
      margin-bottom: 25px;
      color: #555;
    }
    
    /* Status Styles */
    .status-banner {
      padding: 20px;
      margin: 20px 0;
      text-align: center;
      border-radius: 6px;
      font-weight: 600;
      font-size: 20px;
    }
    
    .status-processing {
      background-color: #fcf8e3;
      color: #8a6d3b;
      border: 1px solid #faebcc;
    }
    
    .status-shipped {
      background-color: #d9edf7;
      color: #31708f;
      border: 1px solid #bce8f1;
    }
    
    .status-delivered {
      background-color: #dff0d8;
      color: #3c763d;
      border: 1px solid #d6e9c6;
    }
    
    .status-cancelled {
      background-color: #f2dede;
      color: #a94442;
      border: 1px solid #ebccd1;
    }
    
    .status-paid {
      background-color: #dff0d8;
      color: #3c763d;
      border: 1px solid #d6e9c6;
    }
    
    /* Order Info Styles */
    .order-info {
      background-color: #f5f3fc;
      border-radius: 6px;
      padding: 20px;
      margin-bottom: 25px;
    }
    
    .order-header {
      font-size: 18px;
      font-weight: 600;
      color: #5c3fa9;
      margin-top: 0;
      margin-bottom: 15px;
      border-bottom: 1px solid #e6e1f5;
      padding-bottom: 10px;
    }
    
    .order-details {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
    }
    
    .order-detail {
      width: 48%;
      margin-bottom: 10px;
    }
    
    .detail-label {
      font-weight: 600;
      font-size: 14px;
      color: #666;
    }
    
    .detail-value {
      font-size: 16px;
    }
    
    /* Product Table */
    .products-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 25px;
    }
    
    .products-table th {
      background-color: #f5f3fc;
      color: #5c3fa9;
      text-align: left;
      padding: 12px;
      font-size: 14px;
      font-weight: 600;
    }
    
    .products-table td {
      padding: 12px;
      border-bottom: 1px solid #eee;
      font-size: 14px;
      vertical-align: middle;
    }
    
    .product-image {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border-radius: 4px;
      background-color: #f5f5f5;
    }
    
    .product-name {
      font-weight: 600;
      color: #333;
    }
    
    .product-color {
      color: #666;
      font-size: 13px;
    }
    
    /* CTA Button */
    .cta-button {
      display: block;
      background-color: #5c3fa9;
      color: white;
      text-align: center;
      padding: 14px 30px;
      text-decoration: none;
      border-radius: 6px;
      font-weight: 600;
      margin: 30px auto;
      width: fit-content;
      transition: background-color 0.3s ease;
    }
    
    .cta-button:hover {
      background-color: #4a3294;
    }
    
    /* Footer Styles */
    .email-footer {
      background-color: #f5f3fc;
      padding: 20px 30px;
      text-align: center;
      font-size: 13px;
      color: #666;
    }
    
    .contact-info {
      margin: 15px 0;
      font-size: 14px;
    }
    
    .contact-link {
      color: #5c3fa9;
      text-decoration: none;
    }
    
    .social-links {
      margin: 20px 0;
    }
    
    .social-icon {
      display: inline-block;
      margin: 0 8px;
      width: 24px;
      height: 24px;
    }
    
    .copyright {
      margin-top: 15px;
      font-size: 12px;
      color: #888;
    }
    
    /* Responsive Styles */
    @media screen and (max-width: 600px) {
      .email-content {
        padding: 20px;
      }
      
      .order-detail {
        width: 100%;
      }
      
      .products-table th,
      .products-table td {
        padding: 8px;
      }
      
      .product-image {
        width: 50px;
        height: 50px;
      }
    }
  </style>
</head>
<body>
  <div class="email-container">
    <!-- Header with Logo -->
    <div class="email-header">
      <img src="{{$json.emailTemplateData.logoUrl}}" alt="{{$json.emailTemplateData.siteName}} Logo" class="logo">
    </div>
    
    <!-- Main Content -->
    <div class="email-content">
      <div class="greeting">Hello {{#if $json.body.customerInfo.name}}{{$json.body.customerInfo.name}}{{else}}{{$json.customerInfo.name}}{{/if}},</div>
      
      <!-- Dynamic status message based on status type -->
      {{#if $json.body.notificationType}}
        {{#if (eq $json.body.notificationType "order_status_update")}}
          {{#if (eq $json.body.orderStatus "processing")}}
          <div class="status-banner status-processing">
            Your Order is Being Processed
          </div>
          <div class="message">
            Great news! We're currently processing your order and preparing it for shipment. We'll notify you once it's on its way.
          </div>
          {{/if}}
          
          {{#if (eq $json.body.orderStatus "shipped")}}
          <div class="status-banner status-shipped">
            Your Order Has Been Shipped
          </div>
          <div class="message">
            Your order is on its way! Your package has been handed over to our delivery partner and is on its way to you.
          </div>
          {{/if}}
          
          {{#if (eq $json.body.orderStatus "delivered")}}
          <div class="status-banner status-delivered">
            Your Order Has Been Delivered
          </div>
          <div class="message">
            Your order has been delivered! We hope you enjoy your purchase. If you have any issues, please let us know.
          </div>
          {{/if}}
          
          {{#if (eq $json.body.orderStatus "cancelled")}}
          <div class="status-banner status-cancelled">
            Your Order Has Been Cancelled
          </div>
          <div class="message">
            Your order has been cancelled as requested. If you didn't request this cancellation or have any questions, please contact our support team.
          </div>
          {{/if}}
        {{/if}}
        
        {{#if (eq $json.body.notificationType "order_payment_success")}}
        <div class="status-banner status-paid">
          Payment Confirmed
        </div>
        <div class="message">
          We've confirmed your payment and your order is now being processed. Thank you for your purchase!
        </div>
        {{/if}}
      {{else}}
        {{#if $json.notificationType}}
          {{#if (eq $json.notificationType "order_status_update")}}
            {{#if (eq $json.orderStatus "processing")}}
            <div class="status-banner status-processing">
              Your Order is Being Processed
            </div>
            <div class="message">
              Great news! We're currently processing your order and preparing it for shipment. We'll notify you once it's on its way.
            </div>
            {{/if}}
            
            {{#if (eq $json.orderStatus "shipped")}}
            <div class="status-banner status-shipped">
              Your Order Has Been Shipped
            </div>
            <div class="message">
              Your order is on its way! Your package has been handed over to our delivery partner and is on its way to you.
            </div>
            {{/if}}
            
            {{#if (eq $json.orderStatus "delivered")}}
            <div class="status-banner status-delivered">
              Your Order Has Been Delivered
            </div>
            <div class="message">
              Your order has been delivered! We hope you enjoy your purchase. If you have any issues, please let us know.
            </div>
            {{/if}}
            
            {{#if (eq $json.orderStatus "cancelled")}}
            <div class="status-banner status-cancelled">
              Your Order Has Been Cancelled
            </div>
            <div class="message">
              Your order has been cancelled as requested. If you didn't request this cancellation or have any questions, please contact our support team.
            </div>
            {{/if}}
          {{/if}}
          
          {{#if (eq $json.notificationType "order_payment_success")}}
          <div class="status-banner status-paid">
            Payment Confirmed
          </div>
          <div class="message">
            We've confirmed your payment and your order is now being processed. Thank you for your purchase!
          </div>
          {{/if}}
        {{else}}
          <div class="message">
            We're writing to let you know that there has been an update to your order. Please see the latest status below.
          </div>
        {{/if}}
      {{/if}}
      
      <!-- Order Information -->
      <div class="order-info">
        <h2 class="order-header">Order Information</h2>
        <div class="order-details">
          <div class="order-detail">
            <div class="detail-label">Order Number</div>
            <div class="detail-value">#{{#if $json.body.orderId}}{{$json.body.orderId}}{{else}}{{$json.orderId}}{{/if}}</div>
          </div>
          <div class="order-detail">
            <div class="detail-label">Order Date</div>
            <div class="detail-value">{{#if $json.body.orderDate}}{{$formatDate($json.body.orderDate)}}{{else}}{{#if $json.orderDate}}{{$formatDate($json.orderDate)}}{{else}}{{$formatDate($now)}}{{/if}}{{/if}}</div>
          </div>
          <div class="order-detail">
            <div class="detail-label">Order Status</div>
            <div class="detail-value" style="text-transform: capitalize;">{{#if $json.body.orderStatus}}{{$json.body.orderStatus}}{{else}}{{$json.orderStatus}}{{/if}}</div>
          </div>
          <div class="order-detail">
            <div class="detail-label">Payment Status</div>
            <div class="detail-value" style="text-transform: capitalize;">{{#if $json.body.paymentInfo.paymentStatus}}{{$json.body.paymentInfo.paymentStatus}}{{else}}{{$json.paymentInfo.paymentStatus}}{{/if}}</div>
          </div>
        </div>
      </div>
      
      <!-- Product Table (Abbreviated for status updates) -->
      <h2 class="order-header">Order Summary ({{#if $json.body.totalItems}}{{$json.body.totalItems}}{{else}}{{$json.totalItems}}{{/if}} items)</h2>
      <table class="products-table">
        <thead>
          <tr>
            <th style="width: 70px;"></th>
            <th>Product</th>
            <th style="text-align: center;">Qty</th>
            <th style="text-align: right;">Price</th>
          </tr>
        </thead>
        <tbody>
          {{#if $json.body.products}}
            {{#each $json.body.products}}
            <tr>
              <td>
                {{#if this.imageUrl}}
                <img src="{{this.imageUrl}}" alt="{{this.name}}" class="product-image">
                {{else}}
                <div class="product-image" style="display: flex; align-items: center; justify-content: center; background-color: #f5f5f5; color: #999; font-size: 10px;">No Image</div>
                {{/if}}
              </td>
              <td>
                <div class="product-name">{{this.name}}</div>
                {{#if this.color}}
                <div class="product-color">Color: {{this.color}}</div>
                {{/if}}
              </td>
              <td style="text-align: center;">
                {{this.quantity}}
              </td>
              <td style="text-align: right;">
                {{$formatNumber(this.price, {format: 'INR'})}}
              </td>
            </tr>
            {{/each}}
          {{else}}
            {{#each $json.products}}
            <tr>
              <td>
                {{#if this.imageUrl}}
                <img src="{{this.imageUrl}}" alt="{{this.name}}" class="product-image">
                {{else}}
                <div class="product-image" style="display: flex; align-items: center; justify-content: center; background-color: #f5f5f5; color: #999; font-size: 10px;">No Image</div>
                {{/if}}
              </td>
              <td>
                <div class="product-name">{{this.name}}</div>
                {{#if this.color}}
                <div class="product-color">Color: {{this.color}}</div>
                {{/if}}
              </td>
              <td style="text-align: center;">
                {{this.quantity}}
              </td>
              <td style="text-align: right;">
                {{$formatNumber(this.price, {format: 'INR'})}}
              </td>
            </tr>
            {{/each}}
          {{/if}}
        </tbody>
      </table>
      
      <!-- Order Totals (for some status updates it makes sense to show totals) -->
      {{#if $json.body.notificationType}}
        {{#if (eq $json.body.notificationType "order_payment_success")}}
        <div class="order-totals">
          <div class="total-row">
            <div class="total-label">Subtotal</div>
            <div class="total-value">{{#if $json.body.financialDetails.subtotalFormatted}}{{$json.body.financialDetails.subtotalFormatted}}{{else}}{{$json.financialDetails.subtotalFormatted}}{{/if}}</div>
          </div>
          <div class="total-row">
            <div class="total-label">Shipping</div>
            <div class="total-value">{{#if $json.body.financialDetails.shippingCostFormatted}}{{$json.body.financialDetails.shippingCostFormatted}}{{else}}{{$json.financialDetails.shippingCostFormatted}}{{/if}}</div>
          </div>
          <div class="total-row" style="border-top: 1px solid #eee; padding-top: 10px; margin-top: 5px;">
            <div class="total-label order-total">Total</div>
            <div class="total-value order-total">{{#if $json.body.financialDetails.totalFormatted}}{{$json.body.financialDetails.totalFormatted}}{{else}}{{$json.financialDetails.totalFormatted}}{{/if}}</div>
          </div>
        </div>
        {{/if}}
      {{else}}
        {{#if $json.notificationType}}
          {{#if (eq $json.notificationType "order_payment_success")}}
          <div class="order-totals">
            <div class="total-row">
              <div class="total-label">Subtotal</div>
              <div class="total-value">{{#if $json.body.financialDetails.subtotalFormatted}}{{$json.body.financialDetails.subtotalFormatted}}{{else}}{{$json.financialDetails.subtotalFormatted}}{{/if}}</div>
            </div>
            <div class="total-row">
              <div class="total-label">Shipping</div>
              <div class="total-value">{{#if $json.body.financialDetails.shippingCostFormatted}}{{$json.body.financialDetails.shippingCostFormatted}}{{else}}{{$json.financialDetails.shippingCostFormatted}}{{/if}}</div>
            </div>
            <div class="total-row" style="border-top: 1px solid #eee; padding-top: 10px; margin-top: 5px;">
              <div class="total-label order-total">Total</div>
              <div class="total-value order-total">{{#if $json.body.financialDetails.totalFormatted}}{{$json.body.financialDetails.totalFormatted}}{{else}}{{$json.financialDetails.totalFormatted}}{{/if}}</div>
            </div>
          </div>
          {{/if}}
        {{/if}}
      {{/if}}
      
      <!-- CTA Button -->
      <a href="{{#if $json.body.emailTemplateData.viewOrderUrl}}{{$json.body.emailTemplateData.viewOrderUrl}}{{else}}{{$json.emailTemplateData.viewOrderUrl}}{{/if}}" class="cta-button">View Order Details</a>
      
      <div class="message">
        If you have any questions about your order, please contact our customer service team.
      </div>
    </div>
    
    <!-- Footer -->
    <div class="email-footer">
      <div class="contact-info">
        <div>Email: <a href="mailto:{{#if $json.body.emailTemplateData.supportEmail}}{{$json.body.emailTemplateData.supportEmail}}{{else}}{{$json.emailTemplateData.supportEmail}}{{/if}}" class="contact-link">{{#if $json.body.emailTemplateData.supportEmail}}{{$json.body.emailTemplateData.supportEmail}}{{else}}{{$json.emailTemplateData.supportEmail}}{{/if}}</a></div>
        <div>Phone: {{#if $json.body.emailTemplateData.supportPhone}}{{$json.body.emailTemplateData.supportPhone}}{{else}}{{$json.emailTemplateData.supportPhone}}{{/if}}</div>
      </div>
      
      <div class="social-links">
        <a href="https://instagram.com/konipai.in" class="contact-link" style="margin: 0 10px;">Instagram</a>
        <a href="https://facebook.com/konipai.in" class="contact-link" style="margin: 0 10px;">Facebook</a>
        <a href="https://twitter.com/konipai_in" class="contact-link" style="margin: 0 10px;">Twitter</a>
      </div>
      
      <div class="copyright">
        &copy; {{#if $json.body.emailTemplateData.year}}{{$json.body.emailTemplateData.year}}{{else}}{{$json.emailTemplateData.year}}{{/if}} {{#if $json.body.emailTemplateData.siteName}}{{$json.body.emailTemplateData.siteName}}{{else}}{{$json.emailTemplateData.siteName}}{{/if}}. All rights reserved.
      </div>
    </div>
  </div>
</body>
</html> 